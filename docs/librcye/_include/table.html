<script src = "../src/base.js">
  var NONE = null
  var CENSORED = 1
  var UNCENSORED = 2
  var NEWLY_CENSORED = 3
  var ctype = 0
  var country = null
  var records = null

  function init() {
      //TODO load {getCensoredCountries, load_records} synchronously
      //load select countires
      var countries = getCensoredCountries()
      var dropdown = ""
      for (int i = 0; i < countries.size(); i++) {
	  dropdown = "<option value=\""+countries[i], \"">"+ countries[i]+"</option>"
      }
      document.getElementById("country_select").innerHtml(dropdown)
      load_records()
  }

  function set_censorship_type(id) {
      ctype = id?parseInt(id.value):null
      update_table()
  }

  function set_censorship_country(id) {
      country = id.value
      update_table()
  }

  function update_table() {
      var table="<table><tr><th>Stamp</th><th>Host</th><th>Country></th></tr>"
      for (int i = 0; i < records.size(); i++) {
	  if (country==null || country==records[i][1]) and (ctype==null || ctype==records[i][2]) {
	      table += "<tr><td>"+records[i][0]+"</td><td>"+records[i][1]+"/<td><td>"+records[i][2]+"</td></tr>"
	  }
      }
      table += "</table>"
      document.getElementById("table").innerHtml(table)			
  }
  update_countires()
  update_table()
</script>

<div id = "table" style="width:80%, height:50%" ></div>
<select id = "censorship_type" onclock="set_censorship_type(this)">
  <option value="0">None</option>
  <option value="1">Censord</option>
  <option value="2">Uncensord</option>
  <option value="3">Newly_Censord</option>
</select>

<select id = "country_select" onclock="set_censorship_country(this)"></select>
